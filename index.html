<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SASCalc Web App</title>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" />
    <link rel="shortcut icon" href="https://www.nist.gov/sites/all/themes/nist_style/favicon.ico" type="image/vnd.microsoft.icon" />
    <link rel="stylesheet" href="css/drupal_header.css" />
    <link rel="stylesheet" href="css/default.css" />
    <script src="js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>
</head>
<body onload="loadpage()">
    <header class="top">
        <div class="section-header">
            <div class="section-header__main">
                <h1 class="section-header__title"><a href="https://www.nist.gov/ncnr">NIST Center for Neutron Research</a></h1>
            </div>
        </div>
    </header>
    <header class="title"><h1>SASCALC on the Web</h1></header>
    <div class="content">
        <div class="centered-column" id="preamble">
            <div id="SASWEBCALC">
                <form target="#">
                    <div class="instrument">
                        <label for="instrument">Instrument: </label>
                        <select id="instrumentSelector" onchange="changeInstrument('instrumentSelector', this.value)">
                            <option value="" selected disabled hidden>Choose your instrument</option>
                            <option value="ngb30m">NGB 30m SANS</option>
                            <option value="ng7">NG7 SANS</option>
                            <option value="ngb10m">NGB 10m SANS</option>
                            <option value="vsans">VSANS</option>
                        </select>
                    </div>
                    <hr />
                    <div id="ngb30m" style="display: none">
                        <label for="ngb30GuideConfig">Guides: </label>
                        <select id="ngb30GuideConfig" onchange="updateGuides('ngb30')">
                            <option selected value="0">0 Guides</option>
                            <option value="1">1 Guide</option>
                            <option value="2">2 Guides</option>
                            <option value="3">3 Guides</option>
                            <option value="4">4 Guides</option>
                            <option value="5">5 Guides</option>
                            <option value="6">6 Guides</option>
                            <option value="7">7 Guides</option>
                            <option value="8">8 Guides</option>
                            <option value="LENS">LENS</option>
                        </select>
                        <label for="ngb30SourceAperture">Source Aperture: </label>
                        <select id="ngb30SourceAperture" onchange="updateConfiguration()">
                            <option value="1.43">1.43 cm</option>
                            <option value="2.54">2.54 cm</option>
                            <option value="3.81">3.81 cm</option>
                            <option disabled hidden value="5.08">5.08 cm</option>
                            <option disabled hidden value="5.00">5.00 cm</option>
                            <option disabled hidden value="2.50">2.50 cm</option>
                            <option disabled hidden value="0.95">0.95 cm</option>
                        </select>
                        <div class="canvas"><canvas id="ngb30SansChart"></canvas></div>
                    </div>

                    <div id="ng7" style="display: none">
                        <h3>Collimation:</h3>
                        <div id="ng7Collimation" class="instrument-section">
                            <label for="ng7GuideConfig">Guides: </label>
                            <select id="ng7GuideConfig" onchange="updateGuides('ng7', this.value)">
                                <option selected value="0">0 Guides</option>
                                <option value="1">1 Guide</option>
                                <option value="2">2 Guides</option>
                                <option value="3">3 Guides</option>
                                <option value="4">4 Guides</option>
                                <option value="5">5 Guides</option>
                                <option value="6">6 Guides</option>
                                <option value="7">7 Guides</option>
                                <option value="8">8 Guides</option>
                                <option value="LENS">LENS</option>
                            </select>
                            <label for="ng7SourceAperture">Source Aperture: </label>
                            <select id="ng7SourceAperture" onchange="updateConfiguration()">
                                <option value="1.43">1.43 cm</option>
                                <option value="2.54">2.54 cm</option>
                                <option value="3.81">3.81 cm</option>
                                <option disabled hidden value="5.08">5.08 cm</option>
                            </select>
                            <label for="ng7SampleAperture">Sample Aperture: </label>
                            <select id="ng7SampleAperture" onchange="updateAperture('ng7')">
                                <option value="0.125">0.125"</option>
                                <option value="0.25">0.25"</option>
                                <option value="0.375">0.375"</option>
                                <option selected value="0.5">0.5"</option>
                                <option value="0.625">0.625"</option>
                                <option value="0.75">0.75"</option>
                                <option value="0.875">0.875"</option>
                                <option value="1.00">1.00"</option>
                                <option value="Custom">Custom</option>
                            </select>
                            <label for="ng7CustomAperture" id="ng7CustomApertureLabel" style="display:none">Aperture Diameter (mm): </label>
                            <input type="number" min="0" max="25.4" id="ng7CustomAperture" style="display:none" />
                        </div>

                        <h3>Detector Distance:</h3>
                        <div id="ng7Detector " class="slidecontainer instrument-section">
                            <label for="ng7SDDInputBox">Detector Distance:</label>
                            <input type="number" min="90" max="1530" id="ng7SDDInputBox" />
                            <input type="range" min="90" max="1530" value="100" class="slider" list="ng7SDDDefaults" id="ng7SDDSliderBar" />
                            <datalist id="ng7SDDDefaults">
                                <option value="100" label="100"></option>
                                <option value="400" label="400"></option>
                                <option value="1300" label="1300"></option>
                                <option value="1530" label="1530"></option>
                            </datalist>
                            <label for="ng7OffsetInputBox">Detector Offset:</label>
                            <input type="number" min="0" max="25" id="ng7OffsetInputBox" />
                            <input type="range" min="0" max="25" value="0" class="slider" list="ng7OffsetDefaults" id="ng7OffsetSliderBar" />
                            <datalist id="ng7OffsetDefaults">
                                <option value="0" label="0"></option>
                                <option value="5" label="5"></option>
                                <option value="10" label="10"></option>
                                <option value="15" label="15"></option>
                                <option value="20" label="20"></option>
                                <option value="25" label="25"></option>
                            </datalist>
                            <script>
                                var detectorSlider = document.getElementById("ng7SDDSliderBar");
                                var detectorOutput = document.getElementById("ng7SDDInputBox");
                                var offsetSlider = document.getElementById("ng7OffsetSliderBar");
                                var offsetOutput = document.getElementById("ng7OffsetInputBox");
                                detectorOutput.value = detectorSlider.value;
                                offsetOutput.value = offsetSlider.value;
                                // Update the current slider value (each time you drag the slider handle)
                                detectorSlider.oninput = function () { detectorOutput.value = this.value; }
                                detectorOutput.oninput = function () { detectorSlider.value = this.value; }
                                offsetSlider.oninput = function () { offsetOutput.value = this.value; }
                                offsetOutput.oninput = function () { offsetSlider.value = this.value; }
                            </script>
                        </div>

                        <h3>Neutron Wavelength:</h3>
                        <div id="ng7Wavelength">
                            <label for="ng7Wavelength">&lambda;: </label>
                            <input type="number" min="4" max="20" value="6" id="ng7Wavelength" onchange="updateConfiguration()" />
                            <label for="ng7WavelengthSpread">&Delta;&lambda;/&lambda;</label>
                            <select id="ng7WavelengthSpread" onchange="updateConfiguration()">
                                <option value="9.0">9.0</option>
                                <option selected value="11.5">11.5</option>
                                <option value="13.5">13.5</option>
                                <option value="22.0">22.0</option>
                            </select>
                        </div>

                        <div class="canvas"><canvas id="ng7SansChart"></canvas></div>
                    </div>
                    <div id="ngb10m" style="display: none">
                        <label for="ngb10GuideConfig">Guides: </label>
                        <select id="ngb10GuideConfig" onchange="updateGuides('ngb10')">
                            <option selected value="0">0 Guides</option>
                            <option value="1">1 Guide</option>
                            <option value="2">2 Guides</option>
                        </select>
                        <label for="ngb10SourceAperture">Source Aperture: </label>
                        <select id="ngb10SourceAperture" onchange="updateConfiguration()">
                            <option value="1.3">1.3 cm</option>
                            <option value="2.5">2.5 cm</option>
                            <option value="3.8">3.8 cm</option>
                            <option disabled hidden value="5.0">5.0 cm</option>
                        </select>
                        <div class="canvas"><canvas id="ngb10SansChart"></canvas></div>
                    </div>
                    <div id="vsans" style="display: none">
                        <div class="canvas"><canvas id="vsansChart"></canvas></div>
                    </div>
                </form>
            </div>
        </div>
        <div class="centered-column" id="postscript">
        </div>
    </div>
</body>
</html>
