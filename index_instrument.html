<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SASCalc Web App</title>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" />
    <link rel="stylesheet" href="css/drupal_header.css" />
    <link rel="stylesheet" href="css/default.css" />
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/6.2.2/math.js"></script>
    <!--
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ice/3.7.1/Ice.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ice/3.7.1/Glacier2.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ice/3.7.1/IceStorm.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ice/3.7.1/IceGrid.min.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/data.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/file.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/system.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/devices.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/console.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/dryrun.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/exceptions.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/nice.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/events.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/experiment.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/queue.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/sampleAlignment.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/generated/clientapi.js"></script>
        <script src="http://nicedata.ncnr.nist.gov/niceweb/nicejs/async_connect_zeroc.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.8.7/brython.js"></script>
        <script src="python/link_to_sasmodels.py" type="text/python"></script>
        <script src="js/gamma_incomplete.js"></script>
        <script src="js/nice_connection.js"></script>


    -->
    <script src="js/constants.js"></script>
    <script src="js/persistant_state.js"></script>
    <script src="js/plotting.js"></script>
    <script src="js/slicer.js"></script>
    <script src="js/instrument.js"></script>
    <script src="js/models.js"></script>
    <script src="js/main.js"></script>
</head>

<!--
    TODO: Tie Model Selector to sasmodels
    TODO: Copy https://ncnr.nist.gov/staff/kkrycka/webcalc/calculate.html work into model selector
-->

<body onload="loadInstrumentClass();">
    <header class="top">
        <div class="section-header">
            <div class="section-header__main">
                <h1 class="section-header__title"><a href="https://www.nist.gov/ncnr">NIST Center for Neutron Research</a></h1>
            </div>
        </div>
    </header>
    <header class="title"><h1>SASCALC on the Web</h1></header>
    <div class="content">
        <div class="centered-column" id="preamble">
            <div id="SASWEBCALC">
                <form target="#">
                    <div class="instrument-section" title="Choose the instrument you plan to use.">
                        <label for="instrument">Instrument: </label>
                        <select id="instrumentSelector">
                            <option value="" selected disabled hidden>Choose your setting</option>
                            <option value="ng7">NG7 SANS</option>
                            <!--
                            <option value="qrange">User-Defined Q-Range and Resolutions</option>
                            <option value="ngb30">NGB 30m SANS</option>
                            <option value="ngb10">NGB 10m SANS</option>
                            <option value="vsans">VSANS</option>
                            -->
                        </select>
                        <label id="modelLabel" for="model" style="display: none">Model: </label>
                        <select id="model" style="display: none">
                            <option value="debye" selected>Debye</option>
                            <option value="sphere">Sphere</option>
                        </select>
                        <label id="averagingTypeLabel" for="averagingType" style="display: none">Averaging Method: </label>
                        <select id="averagingType" style="display: none">
                            <option value="circular" selected>Circular</option>
                            <!--
                            <option value="sector">Sector</option>
                            <option value="rectangular">Rectangular</option>
                            <option value="annular">Annular</option>
                            <option value="elliptical">Elliptical</option>
                            -->
                        </select>
                    </div>
                    <div class="instrument-section" id="modelAndAveragingParams">
                        <h3>Averaging and Model Parameters:</h3>
                        <div id="averagingParams">
                            <label for="phi" style="display: none">Orientation Angle (degrees): </label>
                            <input type="number" min="0" max="90" value="0" id="phi" title="" style="display: none" />
                            <label for="dPhi" style="display: none">Azimuthal Range (degrees): </label>
                            <input type="number" min="0" max="45" value="0" id="dPhi" title="" style="display: none" />
                            <label for="detectorSections" style="display: none">Detector Sections: </label>
                            <select id="detectorSections" style="display: none">
                                <option value="both" selected>Entire Detector</option>
                                <option value="left" selected>Left Only</option>
                                <option value="right" selected>Right Only</option>
                            </select>
                            <label for="qCenter" style="display: none">Q Center of Annulus (&#8491;<sup>-1</sup>): </label>
                            <input type="number" min="0.00" max="1.0" value="0.10" step="0.01" id="qCenter" title="" style="display: none" />
                            <label for="qWidth" style="display: none">Q Width (&#8491;<sup>-1</sup>): </label>
                            <input type="number" min="0.00" max="1.0" value="0.05" step="0.01" id="qWidth" title="" style="display: none" />
                            <label for="aspectRatio" style="display: none">Ellipse Aspect Ratio: </label>
                            <input type="number" min="0" max="1" value="1" step="0.1" id="aspectRatio" title="" style="display: none" />
                        </div>
                        <div class="instrument-section" id="modelParams" style="display: none"></div>
                    </div>

                    <!-- Generic SANS Instrument -->
                    <div id="instrument" style="display: none">
                    </div>

                    <!-- Freeze and send to instrument -->
                    <div id="buttons" style="display: none">
                        <hr />
                        <button type="button" id="freezeButton">Freeze Current Calculation</button>
                        <button type="button" id="clearFrozenButton">Clear Frozen</button>
                        <input type="text" id="serverName" />
                        <button type="button" id="sendToNICE">Send to running NICE server</button>
                        <hr />
                    </div>

                    <!-- Chart for all instruments -->
                    <div id="sasCalcCharts">
                        <div class="chart" id="sasCalc1DChart"></div>
                        <div class="chart" id="sasCalc2DChart"></div>
                    </div>
                </form>
            </div>
        </div>
        <div class="centered-column" id="postscript">
        </div>
    </div>
</body>
</html>
